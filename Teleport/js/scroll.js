(function($,document,window){var Scroller=function(iframes){this.init(iframes);};Scroller.prototype.init=function(iframes){this.data=[];iframes.each($.proxy(function(i,elem){var $elem=$(elem);var player=new playerjs.Player(elem);player.on('ready',function(){player.unmute();this.add($elem,player);},this);},this));this.listen();};Scroller.prototype.add=function($elem,player){var t=$elem.offset().top,b=t+$elem.height();this.data.push({top:t,bottom:b,$elem:$elem,player:player});};Scroller.prototype.scrolled=function(){var $window=$(window);var t=$window.scrollTop();var b=t+$window.height();$.each($.map(this.data,function(obj,i){var p=0;if(obj.top<=b&&obj.bottom>=t){var h=obj.bottom-obj.top;if(obj.bottom>b){p=(b-obj.top)/h;}else if(obj.top<t){p=(obj.bottom-t)/h;}else{p=1;}}
return{p:p,t:obj.top,player:obj.player};}).sort(function(a,b){if(a.p>b.p){return-1;}else if(a.p<b.p){return 1;}
if(a.t<b.t){return-1;}else if(a.t>b.t){return 1;}
return 0;}),function(i,obj){if(i===0&&obj.p>0.25){obj.player.play();}else{obj.player.pause();}});};Scroller.prototype.resized=function(){$.each(this.data,function(i,obj){obj.top=obj.$elem.offset().top;obj.bottom=obj.top+obj.$elem.height();});this.scrolled();};Scroller.prototype.listen=function($elem,player){var $window=$(window);$window.on('scroll',$.proxy(function(){if(this.data.length===0){return false;}
this.scrolled();},this));$window.on('resize',$.proxy(function(){if(this.data.length===0){return false;}
this.resized();},this));};$(document).on('ready',function(){var URLS=['https://vimeo.com/78329678','https://www.youtube.com/watch?v=jofNR_WkoCE','http://instagram.com/p/iUUbPvoXTy/','https://vine.co/v/hZ9YmEWaPwO'];$.embedly.oembed(URLS).progress(function(obj){if(!obj.html){return false;}
var ratio=((obj.height/obj.width)*100).toPrecision(4)+'%';var $div=$('<div class="resp"></div>');$div.append(obj.html);$div.css('padding-bottom',ratio);var $box=$('<div class="scroll-box"></div>');$box.append($div);$('.content').append($box);}).done(function(){var scroller=new Scroller($('iframe'));});});})(jQuery,document,window);